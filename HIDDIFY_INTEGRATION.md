# ุฑุงูููุง ฺฉูพุงุฑฺูโุณุงุฒ Hiddify ุจุง ุฑุจุงุช

## ููุง ฺฉู

ุงู ุฑุจุงุช ุงฺฉููู ุงุฒ ุฏู ููุน ูพูู VPN ูพุดุชุจุงู ูโฺฉูุฏ:
- **Marzban** ๐ท
- **Hiddify** ๐ถ

ุดูุง ูโุชูุงูุฏ ูุฑ ุฏู ููุน ูพูู ุฑุง ุจู ุทูุฑ ููุฒูุงู ุฏุฑ ุฑุจุงุช ุฎูุฏ ุงุถุงูู ฺฉูุฏ ู ุฑุจุงุช ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุจุง ูุฑ ฺฉุฏุงู ุจุฑ ุงุณุงุณ ููุน ุขู ุงุฑุชุจุงุท ุจุฑูุฑุงุฑ ูโฺฉูุฏ.

---

## ุชุบุฑุงุช ุงูุฌุงู ุดุฏู

### 1. ูุฏู ูพุงฺฏุงู ุฏุงุฏู
- ููุฏ `panel_type` ุจู ุฌุฏูู `panels` ุงุถุงูู ุดุฏ
- ููุงุฏุฑ ููฺฉู: `MARZBAN` ุง `HIDDIFY`
- ููุฏุงุฑ ูพุดโูุฑุถ ุจุฑุง ูพููโูุง ููุฌูุฏ: `MARZBAN`

### 2. ุณุฑูุณโูุง ุฌุฏุฏ
- **`HiddifyAPI`**: ฺฉูุงุณ API ุจุฑุง ุงุฑุชุจุงุท ุจุง ูพูู Hiddify
- **`PanelAPIFactory`**: ฺฉุงุฑุฎุงูู ุจุฑุง ุงูุชุฎุงุจ ุฎูุฏฺฉุงุฑ API ููุงุณุจ

### 3. ุฑุงุจุท ฺฉุงุฑุจุฑ ูุฏุฑุช ูพููโูุง
- ุงูุชุฎุงุจ ููุน ูพูู ููฺฏุงู ุงูุฒูุฏู ูพูู ุฌุฏุฏ
- ููุงุด ุขฺฉูู ูุดุฎุต ุจุฑุง ูุฑ ููุน ูพูู ุฏุฑ ูุณุช
  - ๐ท ุจุฑุง Marzban
  - ๐ถ ุจุฑุง Hiddify

---

## ูุงฺฏุฑุดู ุฏุชุงุจุณ

ูุจู ุงุฒ ุงุณุชูุงุฏูุ ุจุงุฏ ูุงฺฏุฑุดู ุฏุชุงุจุณ ุฑุง ุงุฌุฑุง ฺฉูุฏ:

```bash
# ุงุฌุฑุง ูุงฺฏุฑุดู
alembic upgrade head
```

ุงู ูุงฺฏุฑุดู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ:
- ููุฏ `panel_type` ุฑุง ุจู ุฌุฏูู `panels` ุงุถุงูู ูโฺฉูุฏ
- ููุฏุงุฑ ูพุดโูุฑุถ `MARZBAN` ุฑุง ุจุฑุง ูพููโูุง ููุฌูุฏ ุชูุธู ูโฺฉูุฏ

---

## ุงุณุชูุงุฏู ุงุฒ ุฑุจุงุช

### ุงูุฒูุฏู ูพูู Hiddify

1. ุจู ุนููุงู ูุฏุฑ ูุงุฑุฏ ุฑุจุงุช ุดูุฏ
2. ุจู ููู **ุชูุธูุงุช > ูุฏุฑุช ูพููโูุง** ุจุฑูุฏ
3. ุฑู **โ ุงูุฒูุฏู ูพูู ุฌุฏุฏ** ฺฉูฺฉ ฺฉูุฏ
4. ููุน ูพูู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ: **๐ถ Hiddify**
5. ุงุทูุงุนุงุช ูพูู ุฑุง ูุงุฑุฏ ฺฉูุฏ:
   - ูุงู ูพูู (ุจุฑุง ุดูุงุณุง)
   - ุขุฏุฑุณ URL ูพูู (ูุซุงู: `https://panel.example.com`)
   - ูุงู ฺฉุงุฑุจุฑ ุงุฏูู
   - ุฑูุฒ ุนุจูุฑ ุงุฏูู
6. ุงุทูุงุนุงุช ุฑุง ุชุงุฏ ฺฉูุฏ

### ุงูุฒูุฏู ูพูู Marzban

ูุฑุงุญู ูุดุงุจู Hiddify ุงุณุชุ ุจุง ุงู ุชูุงูุช ฺฉู ุฏุฑ ูุฑุญูู 4 ุจุงุฏ **๐ท Marzban** ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ.

---

## ูุงุจูุชโูุง ูพุดุชุจุงู ุดุฏู

ุชูุงู ูุงุจูุชโูุง ุฑุจุงุช ุจุง ูุฑ ุฏู ููุน ูพูู ฺฉุงุฑ ูโฺฉููุฏ:

โ ุงุฌุงุฏ ฺฉุงุฑุจุฑ ุฌุฏุฏ
โ ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ
โ ุชูุฏุฏ ุณุฑูุณ
โ ุบุฑูุนุงูโุณุงุฒ ฺฉุงุฑุจุฑ
โ ุฑุณุช UUID
โ ุฏุฑุงูุช ุขูุงุฑ ุณุณุชู
โ ูุณุช ฺฉุงุฑุจุฑุงู
โ ุชุฑฺฉุจ ููฺฉโูุง ุงุดุชุฑุงฺฉ ุงุฒ ฺูุฏ ูพูู
โ ุชูุฏุฏ ุฎูุฏฺฉุงุฑ
โ ููุชูฺฉุดูโูุง ุงุชููุงุช
โ ุงฺฉุงูุช ุชุณุช

---

## ูฺฉุงุช ููู

### 1. ุณุงุฒฺฏุงุฑ API

ฺฉูุงุณ `HiddifyAPI` ุจู ฺฏูููโุง ุทุฑุงุญ ุดุฏู ฺฉู ุฎุฑูุฌโูุง ุขู ุจุง `MarzbanAPI` ุณุงุฒฺฏุงุฑ ุงุณุช. ุงู ุนู:
- ุชูุงู ฺฉุฏูุง ููุฌูุฏ ุจุฏูู ุชุบุฑ ฺฉุงุฑ ูโฺฉููุฏ
- ูโุชูุงูุฏ ูพููโูุง Marzban ู Hiddify ุฑุง ููุฒูุงู ุงุณุชูุงุฏู ฺฉูุฏ
- ููฺฉโูุง ุงุดุชุฑุงฺฉ ุงุฒ ูุฑ ุฏู ููุน ูพูู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุชุฑฺฉุจ ูโุดููุฏ

### 2. ูุฏุฑุช ุฎุทุง

- ุงฺฏุฑ ฺฉ ูพูู ุฏุฑ ุฏุณุชุฑุณ ูุจุงุดุฏุ ุฑุจุงุช ุจู ูพููโูุง ุฏฺฏุฑ ูุชุตู ูโุดูุฏ
- ุงฺฏุฑ ูฺ ูพูู ุฏุฑ ุฏุณุชุฑุณ ูุจุงุดุฏุ ฺฉุงุฑุจุฑ ูพุบุงู ุฎุทุง ููุงุณุจ ุฏุฑุงูุช ูโฺฉูุฏ

### 3. ูพููโูุง ูุนุงู/ุบุฑูุนุงู

- ููุท ูพููโูุง ฺฉู ูุถุนุช `is_active = True` ุฏุงุฑูุฏ ุงุณุชูุงุฏู ูโุดููุฏ
- ูโุชูุงูุฏ ูพููโูุง ุฑุง ูููุชุงู ุบุฑูุนุงู ฺฉูุฏ ุจุฏูู ุงูฺฉู ุญุฐูุดุงู ฺฉูุฏ

---

## API Endpoints ููุฑุฏ ุงุณุชูุงุฏู

### Hiddify API

```
POST   /api/v2/admin/login              # ุงุญุฑุงุฒ ููุช
POST   /api/v2/admin/user/              # ุงุฌุงุฏ ฺฉุงุฑุจุฑ
GET    /api/v2/admin/user/{username}/   # ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ
PUT    /api/v2/admin/user/{username}/   # ุจุฑูุฒุฑุณุงู ฺฉุงุฑุจุฑ
POST   /api/v2/admin/user/{username}/reset/  # ุฑุณุช UUID
GET    /api/v2/admin/system/            # ุขูุงุฑ ุณุณุชู
GET    /api/v2/admin/user/              # ูุณุช ฺฉุงุฑุจุฑุงู
```

### Marzban API

```
POST   /api/admin/token                 # ุงุญุฑุงุฒ ููุช
POST   /api/user                        # ุงุฌุงุฏ ฺฉุงุฑุจุฑ
GET    /api/user/{username}             # ุฏุฑุงูุช ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ
PUT    /api/user/{username}             # ุจุฑูุฒุฑุณุงู ฺฉุงุฑุจุฑ
POST   /api/user/{username}/reset       # ุฑุณุช UUID
GET    /api/system                      # ุขูุงุฑ ุณุณุชู
GET    /api/users                       # ูุณุช ฺฉุงุฑุจุฑุงู
```

---

## ุนุจโุงุจ

### ุฎุทุง ุงุญุฑุงุฒ ููุช

ุงฺฏุฑ ูพุบุงู ุฎุทุง ุงุญุฑุงุฒ ููุช ุฏุฑุงูุช ฺฉุฑุฏุฏ:
1. ุขุฏุฑุณ URL ูพูู ุฑุง ุจุฑุฑุณ ฺฉูุฏ (ูุจุงุฏ `/` ุฏุฑ ุงูุชูุง ุฏุงุดุชู ุจุงุดุฏ)
2. ูุงู ฺฉุงุฑุจุฑ ู ุฑูุฒ ุนุจูุฑ ุฑุง ูุฌุฏุฏุงู ูุงุฑุฏ ฺฉูุฏ
3. ูุทูุฆู ุดูุฏ ูพูู ุฏุฑ ุฏุณุชุฑุณ ุงุณุช

### ุฎุทุง ุงุฌุงุฏ ฺฉุงุฑุจุฑ

ุงฺฏุฑ ุงูฺฉุงู ุงุฌุงุฏ ฺฉุงุฑุจุฑ ุฑู ูพูู Hiddify ูุฌูุฏ ูุฏุงุฑุฏ:
1. ุจุฑุฑุณ ฺฉูุฏ ฺฉู ูุณุฎู API ูพูู ุดูุง ุจุง endpoint ูุง ุงุณุชูุงุฏู ุดุฏู ุณุงุฒฺฏุงุฑ ุจุงุดุฏ
2. ูุงฺฏโูุง ูพูู Hiddify ุฑุง ุจุฑุฑุณ ฺฉูุฏ
3. ูุฌูุฒูุง ฺฉุงุฑุจุฑ ุงุฏูู ุฑุง ุจุฑุฑุณ ฺฉูุฏ

### ุจุฑุฑุณ ูุงฺฏโูุง

ุจุฑุง ุฏุฏู ุฌุฒุฆุงุช ุฎุทุงูุง:
```bash
# ูุดุงูุฏู ูุงฺฏโูุง ุฑุจุงุช
tail -f logs/bot.log

# ุง ุงุณุชูุงุฏู ุงุฒ systemd
journalctl -u meowvpnbot -f
```

---

## ุณูุงูุงุช ูุชุฏุงูู

**ุณ: ุขุง ูโุชูุงูู ููุท ุงุฒ ูพูู Hiddify ุงุณุชูุงุฏู ฺฉููุ**
ุฌ: ุจููุ ูโุชูุงูุฏ ุชููุง ูพููโูุง Hiddify ุงุถุงูู ฺฉูุฏ ุง ุชุฑฺฉุจ ุงุฒ ูุฑ ุฏู.

**ุณ: ุขุง ูพููโูุง ูุฏู Marzban ูู ฺฉุงุฑ ูโฺฉููุฏุ**
ุฌ: ุจููุ ูพููโูุง ููุฌูุฏ ุดูุง ุจุฏูู ูฺ ูุดฺฉู ฺฉุงุฑ ูโฺฉููุฏ. ูุงฺฏุฑุดู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ููุน ุขููุง ุฑุง ุจู Marzban ุชูุธู ูโฺฉูุฏ.

**ุณ: ุขุง ูโุชูุงูู ููุน ฺฉ ูพูู ุฑุง ุชุบุฑ ุฏููุ**
ุฌ: ุฎุฑุ ุจุนุฏ ุงุฒ ุงุฌุงุฏ ูพูู ููโุชูุงูุฏ ููุน ุขู ุฑุง ุชุบุฑ ุฏูุฏ. ุจุงุฏ ูพูู ุฑุง ุญุฐู ฺฉุฑุฏู ู ุฏูุจุงุฑู ุจุง ููุน ุตุญุญ ุงุถุงูู ฺฉูุฏ.

**ุณ: ุขุง ููฺฉ ุงุดุชุฑุงฺฉ ุชุฑฺฉุจ ุจุง ูุฑ ุฏู ููุน ูพูู ฺฉุงุฑ ูโฺฉูุฏุ**
ุฌ: ุจููุ ุฑุจุงุช ููฺฉโูุง ุงุดุชุฑุงฺฉ ุงุฒ ุชูุงู ูพููโูุง ูุนุงู ุฑุง ุชุฑฺฉุจ ูโฺฉูุฏุ ุตุฑู ูุธุฑ ุงุฒ ููุน ุขููุง.

---

## ูพุดุชุจุงู

ุงฺฏุฑ ูุดฺฉู ุฏุงุฑุฏ:
1. ุงุจุชุฏุง ูุงฺฏโูุง ุฑุจุงุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ
2. ูุทูุฆู ุดูุฏ ูุงฺฏุฑุดู ุฏุชุงุจุณ ุงุฌุฑุง ุดุฏู ุงุณุช
3. ุชูุธูุงุช ูพููโูุง ุฎูุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ
4. ุฏุฑ ุตูุฑุช ุงุฏุงูู ูุดฺฉูุ ฺฉ issue ุฏุฑ GitHub ุงุฌุงุฏ ฺฉูุฏ

---

## ูุซุงู ฺฉุฏ

### ุงุณุชูุงุฏู ุงุฒ Factory

```python
from services.panel_api_factory import get_panel_api
from database.models.panel import Panel

# ุฏุฑุงูุช ูพูู ุงุฒ ุฏุชุงุจุณ
panel = db.query(Panel).filter(Panel.id == panel_id).first()

# ุฏุฑุงูุช API ููุงุณุจ (Marzban ุง Hiddify)
api = get_panel_api(panel)

# ุงุณุชูุงุฏู ุงุฒ API
user_details = await api.get_user(username)
await api.renew_user(service)
```

### ฺฺฉ ฺฉุฑุฏู ููุน ูพูู

```python
from database.models.panel import PanelType

if panel.panel_type == PanelType.MARZBAN:
    print("ุงู ฺฉ ูพูู Marzban ุงุณุช")
elif panel.panel_type == PanelType.HIDDIFY:
    print("ุงู ฺฉ ูพูู Hiddify ุงุณุช")
```

---

## ุชุงุฑุฎฺู ูุณุฎูโูุง

### v2.0.0 (2025-10-19)
- โจ ุงูุฒูุฏู ูพุดุชุจุงู ุงุฒ Hiddify
- โจ ุงุฌุงุฏ Panel API Factory
- โจ ูุงฺฏุฑุดู ุฏุชุงุจุณ ุจุฑุง panel_type
- ๐ง ุจูุจูุฏ ูุฏุฑุช ูพููโูุง
- ๐ ุจุฑูุฒุฑุณุงู ูุณุชูุฏุงุช

---

ุชุจุฑฺฉ ูโฺฏูู! ุฑุจุงุช ุดูุง ุงฺฉููู ุงุฒ ูพููโูุง Marzban ู Hiddify ูพุดุชุจุงู ูโฺฉูุฏ! ๐

