# 📝 تاریخچه تغییرات (Changelog)

## [2.5.0] - 2025-10-16

### 🎉 قابلیت‌های جدید (New Features)

#### برای کاربران:
- ✅ **دکمه کسب درآمد** - امکان تبدیل آسان به بازاریاب
- ✅ **منوی دسته‌بندی شده سرویس** - سازماندهی بهتر دکمه‌ها (دسترسی، مدیریت، اطلاعات)
- ✅ **سیستم FAQ جامع** - 5 دسته با راهنمای کامل فارسی
- ✅ **هشدارهای اتصال** - قابلیت فعال/غیرفعال توسط کاربر
- ✅ **نوتیفیکیشن‌های هوشمند**:
  - هشدار انقضای سرویس (3 روز قبل)
  - هشدار حجم کم (کمتر از 20%)
  - اعلان تمدید خودکار
- ✅ **تاریخچه تراکنش‌ها بهبود یافته** - فیلتر و خلاصه آماری
- ✅ **اطلاعات حساب جامع** - نمایش آمار کامل کاربر
- ✅ **لینک‌های مستقیم دانلود اپ‌ها** - برای اندروید، iOS، ویندوز و مک

#### برای بازاریاب‌ها:
- ✅ **آمار تفصیلی بازاریابی**:
  - کاربران فعال
  - درآمد کل و ماهانه
  - موجودی قابل تسویه
- ✅ **پنل بازاریابی بهبود یافته**

#### برای ادمین:
- ✅ **داشبورد پیشرفته** با آمار جامع:
  - تفکیک کاربران (مشتری، بازاریاب)
  - آمار سرویس‌ها (با دسته‌بندی)
  - آمار مالی (درآمد کل، ماهانه، کمیسیون‌ها)
  - آمار پنل‌ها
- ✅ **مسدودسازی کاربران** - امکان مسدود/فعال کردن
- ✅ **مدیریت بازاریاب‌ها** - لیست و آمار تمام بازاریاب‌ها
- ✅ **پشتیبانی از چند ادمین** - ارسال اعلان‌ها به تمام ادمین‌ها

### 🔧 بهبودها (Improvements)

- ✅ **کد بهینه‌تر** - refactoring و cleanup
- ✅ **Query های بهتر** - استفاده از JOIN و aggregation
- ✅ **Error handling جامع‌تر**
- ✅ **لاگینگ بهتر**
- ✅ **Validation های بیشتر**
- ✅ **سازماندهی بهتر کد** - فایل‌های جدید و ماژولار

### 🐛 رفع باگ‌ها (Bug Fixes)

- ✅ رفع مشکل ADMIN_ID vs ADMIN_IDS
- ✅ رفع اشتباه تایپی END_CONVERSATION
- ✅ رفع مشکل ارسال رسید به یک ادمین
- ✅ بهبود مدیریت خطا در ارتباط با پنل‌ها

### 📚 مستندات (Documentation)

- ✅ `README_IMPROVEMENTS.md` - خلاصه تغییرات
- ✅ `DEPLOYMENT_GUIDE.md` - راهنمای کامل استقرار
- ✅ `FEATURES.md` - لیست کامل قابلیت‌ها
- ✅ `FINAL_SUMMARY.md` - خلاصه نهایی
- ✅ `CHANGELOG.md` - این فایل!
- ✅ `.env.example` - نمونه تنظیمات

### 🗄️ تغییرات دیتابیس (Database Changes)

- ✅ Migration 002: اضافه شدن فیلد `connection_alerts` به جدول services

### 📁 فایل‌های جدید (New Files)

1. `bot/handlers/customer/earn_money_handler.py` - مدیریت کسب درآمد
2. `bot/handlers/customer/referral_tracker.py` - ردیابی رفرال
3. `bot/handlers/customer/service_stats.py` - آمار سرویس کاربر
4. `bot/handlers/admin/marketer_management.py` - مدیریت بازاریاب‌ها
5. `bot/middlewares/user_status.py` - بررسی وضعیت کاربر
6. `bot/notifications.py` - سیستم نوتیفیکیشن
7. `alembic/versions/002_add_connection_alerts.py` - Migration

### 📝 فایل‌های به‌روزرسانی شده (Updated Files)

18 فایل به‌روزرسانی شده شامل:
- `main.py`
- تمام handler ها
- کیبوردها
- Query functions
- Models
- `locales/fa.json` (30+ متن جدید)

### 🔢 آمار تغییرات

- **خطوط کد اضافه شده:** ~2500+
- **فایل‌های جدید:** 7
- **فایل‌های ویرایش شده:** 18
- **متن‌های فارسی جدید:** 35+
- **Query Functions جدید:** 15+
- **قابلیت‌های جدید:** 15+

---

## [2.0.0] - قبل از این

نسخه اولیه با قابلیت‌های پایه:
- خرید سرویس
- سیستم کیف پول
- پرداخت آنلاین و کارت به کارت
- مدیریت سرویس
- سیستم بازاریابی ساده
- پنل ادمین
- تمدید خودکار

---

**توجه:** این ربات به صورت مداوم در حال بهبود است. برای به‌روزرسانی‌ها و قابلیت‌های جدید، این فایل را دنبال کنید.

