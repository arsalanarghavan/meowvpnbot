# ุชุบุฑุงุช ูุณุฎู 2.0.0 - ูพุดุชุจุงู ุงุฒ Hiddify

## ๐ ูุงุจูุชโูุง ุฌุฏุฏ

### 1. ูพุดุชุจุงู ุงุฒ ูพูู Hiddify
- ุงุถุงูู ุดุฏู ฺฉูุงุณ `HiddifyAPI` ุจุฑุง ุงุฑุชุจุงุท ุจุง ูพูู Hiddify
- ุงูฺฉุงู ุงูุฒูุฏู ู ูุฏุฑุช ูพููโูุง Hiddify ุฏุฑ ฺฉูุงุฑ Marzban
- ููุงุด ุขฺฉูู ูุดุฎุต ุจุฑุง ูุฑ ููุน ูพูู (๐ท Marzban / ๐ถ Hiddify)

### 2. Panel API Factory
- ุงุฌุงุฏ ุณุณุชู Factory ุจุฑุง ุงูุชุฎุงุจ ุฎูุฏฺฉุงุฑ API ููุงุณุจ
- ูุฏุฑุช ฺฉูพุงุฑฺู ุงููุงุน ูุฎุชูู ูพููโูุง
- ุณุงุฒฺฏุงุฑ ฺฉุงูู ุจุง ฺฉุฏูุง ููุฌูุฏ

### 3. ุจูุจูุฏ ูุฏุฑุช ูพููโูุง
- ุงูุชุฎุงุจ ููุน ูพูู ููฺฏุงู ุงูุฒูุฏู ูพูู ุฌุฏุฏ
- ููุงุด ุจูุชุฑ ูุณุช ูพููโูุง ุจุง ุขฺฉููโูุง ูุดุฎุต
- ูพุดุชุจุงู ุงุฒ ฺูุฏ ููุน ูพูู ุจู ุตูุฑุช ููุฒูุงู

---

## ๐ง ุชุบุฑุงุช ูู

### ูุฏู ุฏุชุงุจุณ
```python
# ููุฏ ุฌุฏุฏ ุฏุฑ ูุฏู Panel
panel_type = Column(Enum(PanelType), nullable=False, default=PanelType.MARZBAN)
```

### ูุงูโูุง ุฌุฏุฏ
- `services/hiddify_api.py` - ฺฉูุงุณ API ุจุฑุง Hiddify
- `services/panel_api_factory.py` - Factory ุจุฑุง ุงูุชุฎุงุจ API
- `alembic/versions/004_add_panel_type.py` - ูุงฺฏุฑุดู ุฏุชุงุจุณ
- `HIDDIFY_INTEGRATION.md` - ุฑุงูููุง ฺฉุงูู ฺฉูพุงุฑฺูโุณุงุฒ

### ูุงูโูุง ุจุฑูุฒุฑุณุงู ุดุฏู
- `database/models/panel.py` - ุงุถุงูู ุดุฏู enum PanelType
- `database/models/queries/panel_queries.py` - ูพุดุชุจุงู ุงุฒ panel_type
- `bot/handlers/admin/panel_management.py` - UI ุจุฑุง ุงูุชุฎุงุจ ููุน ูพูู
- `bot/states/conversation_states.py` - state ุฌุฏุฏ ุจุฑุง ุงูุชุฎุงุจ ููุน
- `locales/fa.json` - ูุชูโูุง ูุงุฑุณ ุฌุฏุฏ

### ุชูุงู handler ูุง ุจูโุฑูุฒุฑุณุงู ุดุฏู:
- `bot/handlers/customer/service_management.py`
- `bot/handlers/customer/purchase_flow.py`
- `bot/handlers/customer/payment_handlers.py`
- `bot/handlers/customer/test_account_handler.py`
- `bot/handlers/admin/financial_handlers.py`
- `bot/handlers/admin/panel.py`
- `bot/jobs.py`
- `bot/notifications.py`

---

## ๐ ฺฺฉโูุณุช ูุตุจ

ุจุฑุง ุงุณุชูุงุฏู ุงุฒ ุงู ูุณุฎูุ ูุฑุงุญู ุฒุฑ ุฑุง ุงูุฌุงู ุฏูุฏ:

- [ ] Pull ฺฉุฑุฏู ุขุฎุฑู ุชุบุฑุงุช ุงุฒ git
- [ ] ุงุฌุฑุง ูุงฺฏุฑุดู ุฏุชุงุจุณ: `alembic upgrade head`
- [ ] Restart ฺฉุฑุฏู ุฑุจุงุช
- [ ] ุชุณุช ุงูุฒูุฏู ูพูู Hiddify ุงุฒ ุทุฑู ุฑุจุงุช
- [ ] ุชุณุช ุงุฌุงุฏ ุณุฑูุณ ุฌุฏุฏ

---

## โ๏ธ ูฺฉุงุช ููู

### ุณุงุฒฺฏุงุฑ ุจุง ูุณุฎู ูุจู
- ูพููโูุง Marzban ููุฌูุฏ ุดูุง ุจุฏูู ูฺ ุชุบุฑ ฺฉุงุฑ ูโฺฉููุฏ
- ูุงฺฏุฑุดู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ููุน ูพููโูุง ููุฌูุฏ ุฑุง ุจู `MARZBAN` ุชูุธู ูโฺฉูุฏ
- ูุงุฒ ุจู ุชุบุฑ ุฏุฑ ุชูุธูุงุช ูุนู ูุณุช

### ูุงฺฏุฑุดู ุฏุชุงุจุณ
```bash
# ูุตุจ/ุจุฑูุฒุฑุณุงู Alembic (ุฏุฑ ุตูุฑุช ูุงุฒ)
pip install alembic

# ุงุฌุฑุง ูุงฺฏุฑุดู
alembic upgrade head
```

### ูุงฺฏโูุง
ุจุฑุง ุนุจโุงุจ ุงุญุชูุงู:
```bash
tail -f logs/bot.log
```

---

## ๐งช ุชุณุชโูุง

### ุชุณุช ุงูุฒูุฏู ูพูู Hiddify
1. ุจู ุนููุงู admin ูุงุฑุฏ ุฑุจุงุช ุดูุฏ
2. ุชูุธูุงุช > ูุฏุฑุช ูพููโูุง > ุงูุฒูุฏู ูพูู ุฌุฏุฏ
3. ุงูุชุฎุงุจ ููุน: Hiddify
4. ูุงุฑุฏ ฺฉุฑุฏู ุงุทูุงุนุงุช ูพูู
5. ุจุฑุฑุณ ููููุชโุขูุฒ ุจูุฏู ุงุชุตุงู

### ุชุณุช ุงุฌุงุฏ ุณุฑูุณ
1. ุฎุฑุฏ ฺฉ ุณุฑูุณ ุฌุฏุฏ
2. ุจุฑุฑุณ ุงุฌุงุฏ ฺฉุงุฑุจุฑ ุฏุฑ ูพูู Hiddify
3. ุชุณุช ููฺฉ ุงุดุชุฑุงฺฉ

### ุชุณุช ุชุฑฺฉุจ ูพููโูุง
1. ุงูุฒูุฏู ูู ูพูู Marzban ู ูู Hiddify
2. ุฎุฑุฏ ุณุฑูุณ ุฌุฏุฏ
3. ุจุฑุฑุณ ุงุฌุงุฏ ฺฉุงุฑุจุฑ ุฏุฑ ูุฑ ุฏู ูพูู
4. ุชุณุช ููฺฉ ุงุดุชุฑุงฺฉ ุชุฑฺฉุจ

---

## ๐ API Endpoints ุงุณุชูุงุฏู ุดุฏู

### Hiddify
| Method | Endpoint | ุชูุถุญุงุช |
|--------|----------|---------|
| POST | `/api/v2/admin/login` | ุงุญุฑุงุฒ ููุช |
| POST | `/api/v2/admin/user/` | ุงุฌุงุฏ ฺฉุงุฑุจุฑ |
| GET | `/api/v2/admin/user/{username}/` | ุฏุฑุงูุช ุงุทูุงุนุงุช |
| PUT | `/api/v2/admin/user/{username}/` | ุจุฑูุฒุฑุณุงู ฺฉุงุฑุจุฑ |
| POST | `/api/v2/admin/user/{username}/reset/` | ุฑุณุช UUID |
| GET | `/api/v2/admin/system/` | ุขูุงุฑ ุณุณุชู |
| GET | `/api/v2/admin/user/` | ูุณุช ฺฉุงุฑุจุฑุงู |

---

## ๐ ูุดฺฉูุงุช ุดูุงุฎุชู ุดุฏู

### ูุญุฏูุฏุชโูุง ุงุญุชูุงู Hiddify API
- ุจุฑุฎ ูุณุฎูโูุง Hiddify ููฺฉู ุงุณุช endpoint ูุง ูุชูุงูุช ุฏุงุดุชู ุจุงุดูุฏ
- ุฏุฑ ุตูุฑุช ูุดฺฉูุ ูุณุฎู API ูพูู ุฎูุฏ ุฑุง ุจุฑุฑุณ ฺฉูุฏ

### ุฑุงูโุญู
- ูุทูุฆู ุดูุฏ ุงุฒ ุขุฎุฑู ูุณุฎู Hiddify ุงุณุชูุงุฏู ูโฺฉูุฏ
- ุฏุฑ ุตูุฑุช ูุงุฒุ `services/hiddify_api.py` ุฑุง ุจุง ุชูุฌู ุจู ูุณุฎู ูพูู ุฎูุฏ ุชูุธู ฺฉูุฏ

---

## ๐ฎ ุจุฑูุงููโูุง ุขูุฏู

- [ ] ุงูุฒูุฏู ูพุดุชุจุงู ุงุฒ ูพููโูุง ุฏฺฏุฑ (X-UI, 3X-UI, etc.)
- [ ] ุฏุงุดุจูุฑุฏ ูุฏุฑุช ุจุฑุง ูุงูุชูุฑูฺฏ ููุฒูุงู ฺูุฏ ูพูู
- [ ] ุขูุงุฑฺฏุฑ ุชูฺฉฺฉ ุดุฏู ุจู ุชูฺฉฺฉ ููุน ูพูู
- [ ] Load balancing ููุดููุฏ ุจู ูพููโูุง

---

## ๐ฌ ุจุงุฒุฎูุฑุฏ ู ูพุดุชุจุงู

ุงฺฏุฑ:
- ูุดฺฉู ูพุด ุขูุฏ
- ูพุดููุงุฏ ุฏุงุฑุฏ
- ุจุงฺฏ ูพุฏุง ฺฉุฑุฏุฏ

ูุทูุงู ฺฉ Issue ุฏุฑ GitHub ุงุฌุงุฏ ฺฉูุฏ ุง ุจุง ูุง ุชูุงุณ ุจฺฏุฑุฏ.

---

## ๐ ุชุดฺฉุฑ

ุงุฒ ุงุณุชูุงุฏู ุงุฒ ุงู ุฑุจุงุช ูุชุดฺฉุฑู! ุงูุฏูุงุฑู ุงู ูุงุจูุช ุฌุฏุฏ ุจู ฺฉุณุจ ู ฺฉุงุฑ ุดูุง ฺฉูฺฉ ฺฉูุฏ.

**ุชู ุชูุณุนู MeowVPNBot** ๐ฑ

