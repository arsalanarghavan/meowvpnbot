# ⚡ Installer & Updater - نصب و به‌روزرسانی با یک کلیک!

## 🎉 معرفی

دو اسکریپت قدرتمند برای مدیریت آسان ربات!

---

## 🚀 نصب با یک دستور

```bash
bash install.sh
```

### چه کارهایی انجام می‌دهد؟

```
1. ✅ بررسی Python و pip
2. ✅ ایجاد virtual environment
3. ✅ نصب تمام dependencies
4. ✅ تنظیم فایل .env
5. ✅ اجرای database migrations
6. ✅ (اختیاری) ایجاد systemd service
7. ✅ تست نصب
8. ✅ نمایش راهنمای شروع
```

### زمان: ~5 دقیقه ⏱️

### مثال اجرا:

```
$ bash install.sh

╔═══════════════════════════════════════════════════╗
║         🐱 MeowVPN Bot Installer 🐱             ║
║              نصب خودکار ربات                    ║
╚═══════════════════════════════════════════════════╝

این اسکریپت موارد زیر را نصب می‌کند:
  • Python dependencies
  • Database setup
  • Configuration files
  • Systemd service (optional)

آیا می‌خواهید ادامه دهید؟ (y/n) y

▶ بررسی Python...
✓ Python 3.11 یافت شد

▶ بررسی pip...
✓ pip آماده است

▶ ایجاد virtual environment...
✓ Virtual environment ایجاد شد

▶ نصب dependencies (ممکن است چند دقیقه طول بکشد)...
✓ همه dependencies نصب شدند

▶ بررسی فایل .env...
⚠ فایل .env از .env.example کپی شد

🔧 لطفاً فایل .env را ویرایش کنید...
آیا می‌خواهید الان فایل .env را ویرایش کنید؟ (y/n) y

[ویرایشگر باز می‌شود...]

▶ اجرای database migrations...
✓ Migrations با موفقیت اجرا شدند

آیا می‌خواهید systemd service ایجاد شود؟ (y/n) y
▶ ایجاد systemd service...
✓ Systemd service ایجاد و فعال شد

▶ تست نصب...
✓ تمام فایل‌های ضروری موجود هستند

╔═══════════════════════════════════════════════════╗
║            ✅ نصب با موفقیت انجام شد! ✅          ║
╚═══════════════════════════════════════════════════╝

     /\_/\  
    ( o.o ) 
     > ^ <   MeowVPN Bot v2.5.0
    /|   |\  Ready to meow! 🐱
   (_|   |_)

✓ نصب کامل شد! موفق باشید! 🎊
```

---

## 🔄 به‌روزرسانی با یک دستور

```bash
bash update.sh
```

### چه کارهایی انجام می‌دهد؟

```
1. ✅ توقف ایمن ربات
2. ✅ پشتیبان‌گیری خودکار از دیتابیس
3. ✅ دریافت آخرین نسخه (git pull)
4. ✅ به‌روزرسانی dependencies
5. ✅ اجرای migrations جدید
6. ✅ پاک‌سازی cache
7. ✅ ریستارت هوشمند ربات
8. ✅ نمایش آمار و تغییرات
```

### زمان: ~2 دقیقه ⏱️

### مثال اجرا:

```
$ bash update.sh

╔═══════════════════════════════════════════════════╗
║         🔄 MeowVPN Bot Updater 🔄               ║
║           به‌روزرسانی خودکار ربات              ║
╚═══════════════════════════════════════════════════╝

این اسکریپت موارد زیر را انجام می‌دهد:
  1. پشتیبان‌گیری از دیتابیس
  2. دریافت آخرین تغییرات (git pull)
  3. به‌روزرسانی dependencies
  4. اجرای migrations جدید
  5. ریستارت ربات

آیا می‌خواهید ادامه دهید؟ (y/n) y

▶ بررسی وضعیت ربات...
ℹ ربات در حال اجرا با systemd است

▶ توقف ربات...
✓ ربات متوقف شد (systemd)

▶ پشتیبان‌گیری از دیتابیس...
✓ پشتیبان SQLite ایجاد شد: backups/backup_20251016_153000.db

آیا می‌خواهید از Git به‌روزرسانی شود؟ (y/n) y
▶ دریافت آخرین تغییرات از Git...
✓ آخرین نسخه دریافت شد

▶ به‌روزرسانی dependencies...
✓ Dependencies به‌روزرسانی شدند

▶ اجرای migrations جدید...
✓ Migrations اجرا شدند

▶ پاک‌سازی cache...
✓ Cache پاک شد

آیا می‌خواهید ربات الان اجرا شود؟ (y/n) y
▶ راه‌اندازی ربات...
✓ ربات با systemd راه‌اندازی شد

▶ آمار پروژه:
  📁 فایل‌های Python: 86
  💻 خطوط کد: 6500
  📚 فایل‌های مستندات: 16

╔═══════════════════════════════════════════════════╗
║        ✅ به‌روزرسانی با موفقیت انجام شد! ✅      ║
╚═══════════════════════════════════════════════════╝

     /\_/\  
    ( ^.^ ) 
     > ^ <   Updated & Ready!

✓ به‌روزرسانی کامل شد! 🎊
```

---

## 🎯 استفاده‌های رایج

### نصب اولیه:
```bash
git clone <repo> meowvpnbot
cd meowvpnbot
bash install.sh
```

### به‌روزرسانی هفتگی:
```bash
cd meowvpnbot
bash update.sh
```

### ریستارت سریع:
```bash
sudo systemctl restart meowvpnbot
# یا
bash restart.sh
```

---

## 🔐 امنیت

### اسکریپت‌ها امن هستند چون:

1. ✅ **پشتیبان خودکار** قبل از هر تغییر
2. ✅ **تایید کاربر** برای عملیات مهم
3. ✅ **Rollback آسان** در صورت مشکل
4. ✅ **Virtual environment** برای جداسازی
5. ✅ **Error handling** کامل

### توصیه‌های امنیتی:

```bash
# 1. اسکریپت‌ها را بررسی کنید
cat install.sh
cat update.sh

# 2. با کاربر غیر root اجرا کنید
# 3. فقط از منابع قابل اعتماد دریافت کنید
```

---

## 💡 نکات مهم

### ✅ قبل از نصب:

- Python 3.9+ نصب باشد
- دسترسی sudo داشته باشید (برای systemd)
- فضای کافی دیسک (حداقل 500MB)

### ✅ قبل از به‌روزرسانی:

- فایل‌های مهم را پشتیبان بگیرید (خودکار انجام می‌شود)
- CHANGELOG.md را بخوانید
- در ساعات کم‌کاری انجام دهید

### ✅ بعد از نصب/به‌روزرسانی:

- لاگ‌ها را بررسی کنید
- یک خرید تست انجام دهید
- وضعیت را چک کنید

---

## 🆘 عیب‌یابی

### مشکل: Permission denied

```bash
chmod +x install.sh update.sh
```

### مشکل: Python not found

```bash
sudo apt-get install python3 python3-pip python3-venv
```

### مشکل: Migration failed

```bash
# Downgrade و upgrade مجدد
alembic downgrade -1
alembic upgrade head
```

### مشکل: Bot not starting

```bash
# بررسی لاگ‌ها
tail -50 bot.log

# یا
sudo journalctl -u meowvpnbot -n 50

# تست دستی
source venv/bin/activate
python main.py
```

---

## 📊 مقایسه روش‌ها

| روش | زمان | سختی | توصیه |
|-----|------|------|-------|
| `install.sh` | 5 دقیقه | ⭐ آسان | ⭐⭐⭐⭐⭐ |
| نصب دستی | 15 دقیقه | ⭐⭐⭐ متوسط | ⭐⭐ |
| `update.sh` | 2 دقیقه | ⭐ آسان | ⭐⭐⭐⭐⭐ |
| به‌روزرسانی دستی | 10 دقیقه | ⭐⭐ ساده | ⭐⭐ |

**نتیجه:** استفاده از اسکریپت‌ها **بسیار** راحت‌تر و سریع‌تر است! 🚀

---

## 🎁 Bonus!

### اسکریپت‌های اضافی:

در فایل [🎁_BONUS_SCRIPTS.md](🎁_BONUS_SCRIPTS.md) شامل:
- backup.sh - پشتیبان‌گیری
- status.sh - بررسی وضعیت
- restart.sh - ریستارت سریع
- logs.sh - نمایش لاگ
- dbinfo.sh - اطلاعات دیتابیس
- monitor.sh - مانیتورینگ
- manage.sh - منوی مدیریت
- bot.sh - اسکریپت همه‌کاره

---

<div align="center">

# 🎊 تبریک!

**شما الان دارید:**
- ✅ Installer خودکار
- ✅ Updater هوشمند
- ✅ پشتیبان خودکار
- ✅ مدیریت آسان

**دیگه نصب و به‌روزرسانی مشکلی نیست! 🚀**

---

**مستندات کامل:** [INSTALLATION.md](INSTALLATION.md)

</div>

